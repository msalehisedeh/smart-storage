!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("wizard-storage",["exports","rxjs","@angular/core","@angular/common"],t):t(e["wizard-storage"]={},e.rxjs,e.ng.core,e.ng.common)}(this,function(e,o,t,s){"use strict";var r=function(){function e(){var r=this;this.subjects={local:{},session:{}},this.session=new Object,this.session.isSupported=function(){return r.isSupported(sessionStorage)},this.session.onchange=function(e){return r.onChange(e,"session")},this.session.setItem=function(e,t,o,s){r.setItem("session",e,t,o,s)},this.session.getItem=function(e,t){return r.getItem("session",e,t)},this.session.hasItem=function(e){return null!==sessionStorage.getItem(e)},this.session.removeItem=function(e){sessionStorage.removeItem(e)},this.session.getAllKeys=function(){return r.getAllKeys(sessionStorage)},this.session.clear=function(){sessionStorage.clear()},this.local=new Object,this.local.isSupported=function(){return r.isSupported(localStorage)},this.local.onchange=function(e){return r.onChange(e,"local")},this.local.setItem=function(e,t,o,s){r.setItem("local",e,t,o,s)},this.local.getItem=function(e,t){return r.getItem("local",e,t)},this.local.hasItem=function(e){return null!==localStorage.getItem(e)},this.local.removeItem=function(e){localStorage.removeItem(e)},this.local.getAllKeys=function(){return r.getAllKeys(localStorage)},this.local.clear=function(){localStorage.clear()}}return e.prototype.isSupported=function(e){try{var t=e.getItem("");return e.removeItem(""),e.setItem("",t),null===t?e.removeItem(""):e.setItem("",t),!0}catch(o){return!1}},e.prototype.getItem=function(e,t,o){var s,r="session"===e?sessionStorage:localStorage,n=r.getItem(t),i={};if(n)try{i=JSON.parse(n)}catch(a){i={data:n}}return(s=o&&i.version?o==i.version?i.data:undefined:i.data)&&i.expires&&(new Date).getTime()>=i.expires&&(this.subjects[e][t]&&this.subjects[e][t].next({key:t,oldValue:s,newValue:null}),r.removeItem(t),s=undefined),s},e.prototype.setItem=function(e,t,o,s,r){var n="session"===e?sessionStorage:localStorage,i={data:o};if(s&&(i.version=s),r!=undefined){var a=new Date;a.setTime(a.getTime()+36e5*r),i.expires=a.getTime()}this.subjects[e][t]&&this.subjects[e][t].next({key:t,oldValue:n.getItem(t),newValue:o}),n.setItem(t,JSON.stringify(i))},e.prototype.getAllKeys=function(e){for(var t=[],o=0;o<e.length;o++)t.push(e.key(o));return t},e.prototype.onChange=function(e,t){return this.subjects[t][e]||(this.subjects[t][e]=new o.BehaviorSubject(null)),this.subjects[t][e]},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),n=function(){function e(e){this.wizardService=e,this.wizardStorage=new t.EventEmitter}return e.prototype.onHover=function(e){this.wizardStorage.emit({key:e.key,oldValue:this.toJson(e.oldValue),newValue:this.toJson(e.newValue),url:e.url})},e.prototype.toJson=function(e){var t=e;try{t=JSON.parse(e)}catch(o){}return t},e.decorators=[{type:t.Directive,args:[{selector:"[wizardStorage]"}]}],e.ctorParameters=function(){return[{type:r}]},e.propDecorators={onHover:[{type:t.HostListener,args:["window:storage",["$event"]]}],wizardStorage:[{type:t.Output}]},e}(),i=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[n],exports:[n],imports:[s.CommonModule],providers:[r],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.WizardStorageService=r,e.WizardStorageDirective=n,e.WizardStorageModule=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=wizard-storage.umd.min.js.map