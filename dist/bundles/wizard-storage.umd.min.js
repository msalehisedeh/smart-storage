!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define("wizard-storage",["exports","@angular/common","rxjs","@angular/core"],t):t(e["wizard-storage"]={},e.ng.common,e.rxjs,e.ng.core)}(this,function(e,t,o,s){"use strict";var n=function(){function e(){var n=this;this.subjects={local:{},session:{}},this.session=new Object,this.session.isSupported=function(){return n.isSupported(sessionStorage)},this.session.onchange=function(e){return n.onChange(e,"session")},this.session.setItem=function(e,t,o,s){n.setItem("session",e,t,o,s)},this.session.getItem=function(e,t){return n.getItem("session",e,t)},this.session.hasItem=function(e){return null!==sessionStorage.getItem(e)},this.session.removeItem=function(e){sessionStorage.removeItem(e)},this.session.getAllKeys=function(){return n.getAllKeys(sessionStorage)},this.session.clear=function(){sessionStorage.clear()},this.local=new Object,this.local.isSupported=function(){return n.isSupported(localStorage)},this.local.onchange=function(e){return n.onChange(e,"local")},this.local.setItem=function(e,t,o,s){n.setItem("local",e,t,o,s)},this.local.getItem=function(e,t){return n.getItem("local",e,t)},this.local.hasItem=function(e){return null!==localStorage.getItem(e)},this.local.removeItem=function(e){localStorage.removeItem(e)},this.local.getAllKeys=function(){return n.getAllKeys(localStorage)},this.local.clear=function(){localStorage.clear()}}return e.prototype.isSupported=function(e){try{var t=e.getItem("");return e.removeItem(""),e.setItem("",t),null===t?e.removeItem(""):e.setItem("",t),!0}catch(o){return!1}},e.prototype.getItem=function(e,t,o){var s,n="session"===e?sessionStorage:localStorage,r=n.getItem(t),i={};if(r)try{i=JSON.parse(r)}catch(a){i={data:r}}return(s=o&&i.version?o==i.version?i.data:undefined:i.data)&&i.expires&&(new Date).getTime()>=i.expires&&(this.subjects[e][t]&&this.subjects[e][t].next({key:t,oldValue:s,newValue:null}),n.removeItem(t),s=undefined),s},e.prototype.setItem=function(e,t,o,s,n){var r="session"===e?sessionStorage:localStorage,i={data:o};if(s&&(i.version=s),n!=undefined){var a=new Date;a.setTime(a.getTime()+36e5*n),i.expires=a.getTime()}this.subjects[e][t]&&this.subjects[e][t].next({key:t,oldValue:r.getItem(t),newValue:o}),r.setItem(t,JSON.stringify(i))},e.prototype.getAllKeys=function(e){for(var t=[],o=0;o<e.length;o++)t.push(e.key(o));return t},e.prototype.onChange=function(e,t){return this.subjects[t][e]||(this.subjects[t][e]=new o.BehaviorSubject(null)),this.subjects[t][e]},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[]},e}(),r=function(){function e(e){this.wizardService=e,this.wizardStorage=new s.EventEmitter}return e.prototype.onHover=function(e){this.wizardStorage.emit({key:e.key,oldValue:this.toJson(e.oldValue),newValue:this.toJson(e.newValue),url:e.url})},e.prototype.toJson=function(e){var t=e;try{t=JSON.parse(e)}catch(o){}return t},e.decorators=[{type:s.Directive,args:[{selector:"[wizardStorage]"}]}],e.ctorParameters=function(){return[{type:n}]},e.propDecorators={onHover:[{type:s.HostListener,args:["window:storage",["$event"]]}],wizardStorage:[{type:s.Output}]},e}(),i=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{declarations:[r],exports:[r],imports:[t.CommonModule],providers:[n],schemas:[s.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.WizardStorageModule=i,e.ɵa=r,e.ɵb=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=wizard-storage.umd.min.js.map